{"ast":null,"code":"import _regeneratorRuntime from\"/home/alicia/Documentos/Laboratoria/bqmaster/CDMX011-burger-queen-api-client/burgerqueen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/alicia/Documentos/Laboratoria/bqmaster/CDMX011-burger-queen-api-client/burgerqueen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/alicia/Documentos/Laboratoria/bqmaster/CDMX011-burger-queen-api-client/burgerqueen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable no-nested-ternary */ /* eslint-disable no-unused-expressions */ /* eslint-disable no-unused-vars */ /* eslint-disable react/prop-types */ /* eslint-disable no-shadow */import React,{useState}from'react';import{signInWithEmailAndPassword,setPersistence,browserSessionPersistence}from'firebase/auth';import{useNavigate}from'react-router-dom';import auth from'../firebase/firebaseConfig';import Logo from'../assets/logo.png';import FormLogin from'./FormLogin';import'./styles/Login.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){var getRol=_ref.getRol,setUserData=_ref.setUserData;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var navigate=useNavigate();var handleLogin=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,password){var signIn,retrievedRol,data,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return signInWithEmailAndPassword(auth,email,password);case 3:signIn=_context.sent;_context.next=6;return getRol(auth.currentUser.uid);case 6:retrievedRol=_context.sent;data={uid:auth.currentUser.uid,email:auth.currentUser.email,role:retrievedRol};setUserData(data);console.log('userData final',data);if(retrievedRol==='waiter'){navigate('orders');}else if(retrievedRol==='chef'){navigate('kitchen');}else if(retrievedRol==='admin'){navigate('admin');}else{navigate('/');}console.log('im signIn',signIn);user=auth.currentUser;if(user){console.log(user);}_context.next=20;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](0);setError('Contrase침a y/o correo inv치lidos');setTimeout(function(){return setError('');},2500);case 20:case\"end\":return _context.stop();}}},_callee,null,[[0,16]]);}));return function handleLogin(_x,_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:Logo,alt:\"Logo\",className:\"logo\"}),/*#__PURE__*/_jsx(FormLogin,{handleLogin:handleLogin,error:error})]});};export default Login;","map":{"version":3,"sources":["/home/alicia/Documentos/Laboratoria/bqmaster/CDMX011-burger-queen-api-client/burgerqueen/src/components/Login.jsx"],"names":["React","useState","signInWithEmailAndPassword","setPersistence","browserSessionPersistence","useNavigate","auth","Logo","FormLogin","Login","getRol","setUserData","error","setError","navigate","handleLogin","email","password","signIn","currentUser","uid","retrievedRol","data","role","console","log","user","setTimeout"],"mappings":"0mBAAA,sC,CACA,0C,CACA,mC,CACA,qC,CACA,8BACA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OACEC,0BADF,CAEEC,cAFF,CAGEC,yBAHF,KAIO,eAJP,CAKA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,IAAP,KAAiB,4BAAjB,CAEA,MAAOC,CAAAA,IAAP,KAAiB,oBAAjB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CAEA,MAAO,qBAAP,C,wFAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAA6B,IAA1BC,CAAAA,MAA0B,MAA1BA,MAA0B,CAAlBC,WAAkB,MAAlBA,WAAkB,CACzC,cAA0BV,QAAQ,CAAC,EAAD,CAAlC,wCAAOW,KAAP,eAAcC,QAAd,eACA,GAAMC,CAAAA,QAAQ,CAAGT,WAAW,EAA5B,CAEA,GAAMU,CAAAA,WAAW,2FAAG,iBAAOC,KAAP,CAAcC,QAAd,0LAEKf,CAAAA,0BAA0B,CAACI,IAAD,CAAOU,KAAP,CAAcC,QAAd,CAF/B,QAEVC,MAFU,qCAIWR,CAAAA,MAAM,CAACJ,IAAI,CAACa,WAAL,CAAiBC,GAAlB,CAJjB,QAIVC,YAJU,eAKVC,IALU,CAKH,CACXF,GAAG,CAAEd,IAAI,CAACa,WAAL,CAAiBC,GADX,CAEXJ,KAAK,CAAEV,IAAI,CAACa,WAAL,CAAiBH,KAFb,CAGXO,IAAI,CAAEF,YAHK,CALG,CAUhBV,WAAW,CAACW,IAAD,CAAX,CACAE,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAA8BH,IAA9B,EACA,GAAID,YAAY,GAAK,QAArB,CAA+B,CAC7BP,QAAQ,CAAC,QAAD,CAAR,CACD,CAFD,IAEO,IAAIO,YAAY,GAAK,MAArB,CAA6B,CAClCP,QAAQ,CAAC,SAAD,CAAR,CACD,CAFM,IAEA,IAAIO,YAAY,GAAK,OAArB,CAA8B,CACnCP,QAAQ,CAAC,OAAD,CAAR,CACD,CAFM,IAEA,CACLA,QAAQ,CAAC,GAAD,CAAR,CACD,CACDU,OAAO,CAACC,GAAR,CAAY,WAAZ,CAAyBP,MAAzB,EACMQ,IAtBU,CAsBHpB,IAAI,CAACa,WAtBF,CAuBhB,GAAIO,IAAJ,CAAU,CACRF,OAAO,CAACC,GAAR,CAAYC,IAAZ,EACD,CAzBe,iFA2BhBb,QAAQ,CAAC,iCAAD,CAAR,CACAc,UAAU,CAAC,iBAAMd,CAAAA,QAAQ,CAAC,EAAD,CAAd,EAAD,CAAqB,IAArB,CAAV,CA5BgB,qEAAH,kBAAXE,CAAAA,WAAW,iDAAjB,CA+BA,mBACE,aAAK,SAAS,CAAC,iBAAf,wBACE,YAAK,GAAG,CAAER,IAAV,CAAgB,GAAG,CAAC,MAApB,CAA2B,SAAS,CAAC,MAArC,EADF,cAEE,KAAC,SAAD,EAAW,WAAW,CAAEQ,WAAxB,CAAqC,KAAK,CAAEH,KAA5C,EAFF,GADF,CAMD,CAzCD,CA2CA,cAAeH,CAAAA,KAAf","sourcesContent":["/* eslint-disable no-nested-ternary */\n/* eslint-disable no-unused-expressions */\n/* eslint-disable no-unused-vars */\n/* eslint-disable react/prop-types */\n/* eslint-disable no-shadow */\nimport React, { useState } from 'react';\nimport {\n  signInWithEmailAndPassword,\n  setPersistence,\n  browserSessionPersistence\n} from 'firebase/auth';\nimport { useNavigate } from 'react-router-dom';\nimport auth from '../firebase/firebaseConfig';\n\nimport Logo from '../assets/logo.png';\nimport FormLogin from './FormLogin';\n\nimport './styles/Login.scss';\n\nconst Login = ({ getRol, setUserData }) => {\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n\n  const handleLogin = async (email, password) => {\n    try {\n      const signIn = await signInWithEmailAndPassword(auth, email, password);\n\n      const retrievedRol = await getRol(auth.currentUser.uid);\n      const data = {\n        uid: auth.currentUser.uid,\n        email: auth.currentUser.email,\n        role: retrievedRol\n      };\n      setUserData(data);\n      console.log('userData final', data);\n      if (retrievedRol === 'waiter') {\n        navigate('orders');\n      } else if (retrievedRol === 'chef') {\n        navigate('kitchen');\n      } else if (retrievedRol === 'admin') {\n        navigate('admin');\n      } else {\n        navigate('/');\n      }\n      console.log('im signIn', signIn);\n      const user = auth.currentUser;\n      if (user) {\n        console.log(user);\n      }\n    } catch (error) {\n      setError('Contrase침a y/o correo inv치lidos');\n      setTimeout(() => setError(''), 2500);\n    }\n  };\n  return (\n    <div className=\"login-container\">\n      <img src={Logo} alt=\"Logo\" className=\"logo\" />\n      <FormLogin handleLogin={handleLogin} error={error} />\n    </div>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}